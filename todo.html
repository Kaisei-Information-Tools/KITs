---
layout: default_new
title: Todoリスト
css: todo
js: todo
old_base_css: true
---

<div class="todo-app-container">
  <div class="app-header">
    <h1 class="title">タスク管理</h1>
    <div class="header-controls">
      <button id="view-toggle" class="btn-icon" title="表示切替">
        <i class="fa-solid fa-calendar-days"></i>
      </button>
      <button id="add-task-btn" class="btn-primary">
        <i class="fa-solid fa-plus"></i> 新しいタスク
      </button>
    </div>
  </div>

  <div class="toolbar">
    <div class="search-box">
      <i class="fa-solid fa-magnifying-glass"></i>
      <input type="text" id="search-input" placeholder="タスクを検索...">
    </div>
    <div class="filter-group">
      <select id="filter-status" class="select-input">
        <option value="all">すべて</option>
        <option value="active">進行中</option>
        <option value="completed">完了済み</option>
      </select>
      <select id="filter-sort" class="select-input">
        <option value="custom">カスタム順</option>
        <option value="dueDate">期限順</option>
        <option value="priority">優先度順</option>
      </select>
    </div>
  </div>

  <div id="list-view" class="view-container active">
    <!-- タスクがここに挿入されます -->
    <div id="todo-list" class="task-list"></div>
    <div id="empty-state" class="empty-state hidden">
      <p>タスクはありません。素晴らしい一日を！</p>
    </div>
  </div>

  <div id="calendar-view" class="view-container hidden">
    <div class="calendar-header">
      <button id="prev-month" class="btn-icon"><i class="fa-solid fa-chevron-left"></i></button>
      <h2 id="current-month-display"></h2>
      <button id="next-month" class="btn-icon"><i class="fa-solid fa-chevron-right"></i></button>
    </div>
    <div class="calendar-grid-header">
      <div>日</div>
      <div>月</div>
      <div>火</div>
      <div>水</div>
      <div>木</div>
      <div>金</div>
      <div>土</div>
    </div>
    <div class="calendar-grid" id="calendar-grid"></div>
  </div>
</div>

<!-- タスク編集モーダル -->
<div id="task-modal" class="todo-modal hidden">
  <div class="todo-modal-content">
    <div class="todo-modal-header">
      <h2 id="modal-title">新しいタスク</h2>
      <button id="close-modal" type="button" class="btn-icon"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="todo-modal-body">
      <form id="task-form">
        <input type="hidden" id="task-id">
        <div class="form-group">
          <input type="text" id="task-title" placeholder="何をする？" required autofocus>
        </div>
        <div class="form-group">
          <textarea id="task-desc" placeholder="詳細説明（任意）" rows="3"></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label><i class="fa-regular fa-calendar"></i> 期限</label>
            <input type="date" id="task-due">
          </div>
          <div class="form-group">
            <label><i class="fa-solid fa-flag"></i> 優先度</label>
            <select id="task-priority">
              <option value="low">低</option>
              <option value="medium" selected>中</option>
              <option value="high">高</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label><i class="fa-solid fa-tags"></i> タグ（カンマ区切り）</label>
          <input type="text" id="task-tags" placeholder="仕事, プライベート...">
        </div>

        <div class="recurrence-section">
          <div class="form-group">
            <label><i class="fa-solid fa-repeat"></i> 繰り返し</label>
            <select id="task-recurrence-type">
              <option value="none">繰り返しなし</option>
              <option value="daily">毎日</option>
              <option value="weekly">毎週</option>
              <option value="nweekly">n週ごと</option>
              <option value="monthly-date">毎月（日付指定）</option>
              <option value="monthly-weekday">毎月（曜日指定）</option>
            </select>
          </div>

          <div id="recurrence-days-row" class="form-group hidden">
            <label>繰り返す曜日</label>
            <div class="day-picker">
              <label class="day-check"><input type="checkbox" name="recurrence-dow" value="0"><span>日</span></label>
              <label class="day-check"><input type="checkbox" name="recurrence-dow" value="1"><span>月</span></label>
              <label class="day-check"><input type="checkbox" name="recurrence-dow" value="2"><span>火</span></label>
              <label class="day-check"><input type="checkbox" name="recurrence-dow" value="3"><span>水</span></label>
              <label class="day-check"><input type="checkbox" name="recurrence-dow" value="4"><span>木</span></label>
              <label class="day-check"><input type="checkbox" name="recurrence-dow" value="5"><span>金</span></label>
              <label class="day-check"><input type="checkbox" name="recurrence-dow" value="6"><span>土</span></label>
            </div>
          </div>

          <div id="recurrence-interval-row" class="form-group hidden">
            <label>間隔（週）</label>
            <input type="number" id="task-recurrence-interval" min="2" max="52" value="2">
          </div>

          <div id="recurrence-month-date-row" class="form-group hidden">
            <label>毎月何日</label>
            <input type="number" id="task-recurrence-month-date" min="1" max="31" value="1">
          </div>

          <div id="recurrence-month-weekday-row" class="form-group hidden">
            <div class="form-row">
              <div class="form-group">
                <label>順番</label>
                <select id="task-recurrence-month-ord">
                  <option value="1">第1</option>
                  <option value="2">第2</option>
                  <option value="3">第3</option>
                  <option value="4">第4</option>
                  <option value="-1">最終</option>
                </select>
              </div>
              <div class="form-group">
                <label>曜日</label>
                <select id="task-recurrence-month-weekday">
                  <option value="0">日曜日</option>
                  <option value="1">月曜日</option>
                  <option value="2">火曜日</option>
                  <option value="3">水曜日</option>
                  <option value="4">木曜日</option>
                  <option value="5">金曜日</option>
                  <option value="6">土曜日</option>
                </select>
              </div>
            </div>
          </div>

          <div id="recurrence-end-row" class="form-group hidden">
            <label>終了条件</label>
            <select id="task-recurrence-end-type">
              <option value="never">なし（無期限）</option>
              <option value="date">終了日を指定</option>
              <option value="count">回数を指定</option>
            </select>
            <div id="recurrence-end-date-row" class="hidden" style="margin-top:0.5rem">
              <input type="date" id="task-recurrence-end-date">
            </div>
            <div id="recurrence-end-count-row" class="hidden" style="margin-top:0.5rem">
              <input type="number" id="task-recurrence-end-count" min="1" value="10" placeholder="回数">
            </div>
          </div>
        </div>

        <div class="subtasks-section">
          <label>サブタスク</label>
          <div id="subtask-list"></div>
          <div class="add-subtask-row">
            <input type="text" id="new-subtask-input" placeholder="サブタスクを追加...">
            <button type="button" id="add-subtask-btn" class="btn-sm"><i class="fa-solid fa-plus"></i></button>
          </div>
        </div>

        <div class="modal-footer">
          <button type="submit" class="btn-primary">保存する</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- SortableJS must load before todo.js initializes -->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>