<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- テーマ初期化スクリプト -->
  <script>
    (function () {
      const savedTheme = localStorage.getItem('theme');
      const sysTheme = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (savedTheme === 'dark' | (!savedTheme && sysTheme)) {
        document.documentElement.setAttribute('data-theme', 'dark');
      } else {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>

  <!-- ライブラリ読み込み -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap"
    rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <title>{{ page.title }} - KITs</title>

  <!-- Favicon関連 -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href=" /assets/favicon/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href=" /assets/favicon/favicon-16x16.png" />
  <link rel="manifest" href=" /assets/favicon/site.webmanifest" />
  <link rel="mask-icon" href=" /assets/favicon/safari-pinned-tab.svg" color="#5bbad5" />

  <!-- CSS読み込み -->
  <link rel="stylesheet" href=" /assets/css/reset.css" />
  {% if page.old_base_css %}
  <link rel="stylesheet" href=" /assets/css/base.css" />
  {% endif %}

  <!-- メインスタイルシート (default.css) -->
  <link rel="stylesheet" href=" /assets/css/default.css" />

  {% if page.css %}
  <link rel="stylesheet" href=" /assets/css/{{ page.css }}.css" />
  {% endif %}
  {% if page.css2 %}
  <link rel="stylesheet" href=" /assets/css/{{ page.css2 }}.css" />
  {% endif %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  {% if page.exjs %}
  <script src="{{ page.exjs }}"></script>
  {% endif %}
  {% if page.exlink %}
  <link rel="{{ page.exrel }}" href="{{ page.exlink }}" />
  {% endif %}

</head>

<body>

  <!-- ヘッダー -->
  <header class="header">
    <div class="header-start">
      <button class="menu-icon-btn" id="menu-toggle" aria-label="Menu">
        <i class="fa-solid fa-bars"></i>
      </button>
      <a href=" /" class="logo">
        <img src=" /assets/images/logo.svg" alt="Logo">
      </a>
    </div>

    <nav class="nav-desktop">
      <a href=" /about.html">About</a>
      <a href=" /index.html">Tools</a>
      <a href=" /news.html">News</a>
      <a href=" /links.html">Link</a>
      <a href=" /contact.html">Contact</a>
    </nav>

    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
      <i class="fa-solid fa-moon"></i>
      <i class="fa-solid fa-sun"></i>
    </button>
  </header>

  <!-- サイドバー (Drawer) -->
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-title">Menu</div>
      <button class="menu-icon-btn" id="menu-close"><i class="fa-solid fa-xmark"></i></button>
    </div>

    <!-- モバイル用メインメニュー -->
    <div class="d-lg-none">
      <ul class="sidebar-menu">
        <li><a href=" /about.html"><i class="fa-solid fa-circle-info me-3"></i>About</a></li>
        <li><a href=" /index.html"><i class="fa-solid fa-toolbox me-3"></i>Tools</a></li>
        <li><a href=" /news.html"><i class="fa-regular fa-newspaper me-3"></i>News</a></li>
        <li><a href=" /links.html"><i class="fa-solid fa-link me-3"></i>Link</a></li>
        <li><a href=" /contact.html"><i class="fa-regular fa-envelope me-3"></i>Contact</a></li>
      </ul>
      <hr class="sidebar-divider">
    </div>

    <div class="sidebar-section-label">All Tools</div>
    <ul class="sidebar-menu">
      <li><a href=" /apa">APAスタイル作成</a></li>
      <li><a href=" /clock">時計</a></li>
      <li><a href=" /timer">タイマー</a></li>
      <li><a href=" /stopwatch">ストップウォッチ</a></li>
      <li><a href=" /group">グループ分け</a></li>
      <li><a href=" /conversion">単位変換</a></li>
      <li><a href=" /vertical">縦書きエディタ</a></li>
      <li><a href=" /kundoku">訓読文エディタ</a></li>
      <li><a href=" /charcount">文字カウント</a></li>
      <li><a href=" /todo">todoリスト</a></li>
      <li><a href=" /calculator">電卓</a></li>
      <li><a href=" /pomodoro">ポモドーロ時計</a></li>
      <li><a href=" /number">数字読み方変換</a></li>
      <li><a href=" /count">カウンター</a></li>
      <li><a href=" /latex">LaTeX</a></li>
    </ul>
  </aside>

  <div id="sidebar-overlay" class="sidebar-overlay"></div>

  <!-- メインコンテンツ -->
  <main class="main">

    <!-- 利用規約ポップアップ -->
    <div id="terms-popup">
      <div class="popup-card">
        <i class="fa-solid fa-shield-halved"
          style="font-size: 3rem; color: var(--md-primary); margin-bottom: 1rem;"></i>
        <h2>利用規約の確認</h2>
        <p>
          当サイトを利用するには、<a href=" /terms.html" target="_blank">利用規約・プライバシーポリシー</a>への同意が必要です。
        </p>
        <button class="accept-btn accept">同意して利用する</button>
      </div>
    </div>

    {% if page.no_popup != true %}
    <script>
      window.addEventListener("load", function () {
        if (localStorage.getItem("termsAccepted") !== "true") {
          document.getElementById("terms-popup").style.display = "flex";
        }
      });
      document.querySelector(".accept").addEventListener("click", function () {
        localStorage.setItem("termsAccepted", "true");
        document.getElementById("terms-popup").style.display = "none";
      });
    </script>
    {% endif %}

    <div class="page-content">
      {{ content }}
    </div>

  </main>

  <!-- Topへ戻るFAB -->
  <button id="to-top" aria-label="Back to Top"><i class="fa-solid fa-arrow-up"></i></button>

  <!-- フッター -->
  <footer>
    <div class="footer-inner">
      <a class="logo footer-logo" href=" /">
        <img src=" /assets/images/logo.svg" width="40" alt="Logo">
      </a>

      <div class="footer-links">
        <a href="/about.html">About</a>
        <a href="/index.html">Tools</a>
        <a href="/news.html">News</a>
        <a href="/links.html">Link</a>
        <a href="/contact.html">Contact</a>
      </div>

      <p style="font-size: 0.8rem; color: var(--md-outline);">© 2024 - 2026 Kaisei Information Technology for support
      </p>
    </div>
  </footer>

  <!-- 外部スクリプト -->
  <script src="/assets/js/base.js" defer></script>
  {% if page.js %}
  <script src="/assets/js/{{ page.js }}.js" defer></script>
  {% endif %}

  <!-- レイアウト用スクリプト -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // サイドバーの開閉
      const menuToggle = document.getElementById('menu-toggle');
      const menuClose = document.getElementById('menu-close');
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');

      function toggleSidebar() {
        const isActive = sidebar.classList.contains('active');
        if (isActive) {
          sidebar.classList.remove('active');
          overlay.classList.remove('active');
        } else {
          sidebar.classList.add('active');
          overlay.classList.add('active');
        }
      }

      if (menuToggle) menuToggle.addEventListener('click', toggleSidebar);
      if (menuClose) menuClose.addEventListener('click', toggleSidebar);
      if (overlay) overlay.addEventListener('click', toggleSidebar);

      // テーマ切り替え
      const themeToggle = document.getElementById('theme-toggle');
      themeToggle.addEventListener('click', () => {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
      });

      // Topへ戻るボタン
      const toTopBtn = document.getElementById('to-top');
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          toTopBtn.classList.add('visible');
        } else {
          toTopBtn.classList.remove('visible');
        }
      });
      toTopBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });
  </script>
</body>

</html>